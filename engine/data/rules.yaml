# This file contains all rules used by Onset to evolve words. They are present in
# the following format:
#
# - name (obligatory): nameofrule
# - description (optional): a description of the rule
# - before (optional): the features present in the preceding segment
#     positive: list of positive features
#     negative: list of negative features
# - after (optional): the features present in the succeeding segment
#     positive: list of positive features
#     negative: list of negative features
# - conditions (optional): the features present in the changed segment
#     positive: list of positive features
#     negative: list of negative features
# - applies (obligatory): the features to apply to the changed segment
#     positive: list of positive features
#     negative: list of negative features

---
##############################################################################
## CONSONANTS
##############################################################################
- name: Palatalization
  description: Plosives become palatalized after high vowels.
  before:
    positive:
      - syllabic
      - high
      - front
  conditions:
    negative:
      - syllabic
      - continuant
      - delayedrelease
      - sonorant
  applies:
    positive:
      - dorsal
      - high
      - front
    negative:
      - low
      - back

- name: Consonant Apheresis
  description: Consonants are lost at the beginning of words.
  first: true
  conditions:
    positive:
      - consonantal
  applies:
    positive:
      - deletion

- name: Velarization
  description: Liquids are velarized after back vowels.
  before:
    positive:
      - syllabic
      - back
  conditions:
    positive:
      - consonantal
      - approximant
      - sonorant
    negative:
      - dorsal
  applies:
    positive:
      - dorsal
      - high
      - back
    negative:
      - low
      - front

- name: Labialization
  description: Plosives are labialized after rounded vowels.
  before:
    positive:
      - syllabic
      - round
  conditions:
    negative:
      - syllabic
      - continuant
      - delayedrelease
      - sonorant
      - round
  applies:
    positive:
      - labial
      - round

- name: Dentalization
  description: Alveolar consonants become dentalized before dentalized fricatives.
  conditions:
    positive:
      - anterior
      - consonantal
      - coronal
    negative:
      - distributed
  after:
    positive:
      - coronal
      - anterior
      - distributed
      - continuant
      - delayedrelease
  applies:
    positive:
      - distributed

##############################################################################
## CONSONANTS - LENITION
##############################################################################
- name: Flapping
  description: Alveolar plosives become flapped between vowels.
  conditions:
    positive:
      - anterior
      - consonantal
      - coronal
    negative:
      - distributed
      - continuant
      - delayedrelease
      - sonorant
  applies:
    positive:
      - tap
      - sonorant
      - continuant
      - approximant
  before:
    positive:
      - syllabic
  after:
    positive:
      - syllabic

- name: Consonant Nasalization
  description: Plosives become nasalized between vowels.
  conditions:
    negative:
      - syllabic
      - continuant
      - delayedrelease
      - sonorant
      - nasal
  applies:
    positive:
      - nasal
      - sonorant
  before:
    positive:
      - syllabic
  after:
    positive:
      - syllabic
  
##############################################################################
## CONSONANTS - LENITION - SONORIZATION
##############################################################################
- name: Voicing
  description: Consonants become voiced after voiced segments.
  before:
    positive:
      - voice
  conditions:
    negative:
      - voice
  applies:
    positive:
      - voice

- name: Lateral Vocalization
  description: Liquids become back vowels at the end of words.
  last: true
  conditions:
    positive:
      - approximant
      - sonorant
      - lateral
  applies:
    positive:
      - tense
      - dorsal
    negative:
      - consonantal
      - lateral
      - coronal

- name: Approximation
  description: Voiced continuants become approximants between vowels.
  before:
    positive:
      - syllabic
  after:
    positive:
      - syllabic
  conditions:
    positive:
      - continuant
      - voice
      - consonantal
  applies:
    positive:
      - approximant
      - sonorant
    negative:
      - consonantal
      - anterior

- name: Degemination
  description: Geminated consonants are shortened after vowels.
  before:
    positive:
      - syllabic
  conditions:
    positive:
      - long
  applies:
    negative:
      - long

- name: Vowel Nasalization
  description: Vowels become nasalized after nasal consonants.
  conditions:
    positive:
      - syllabic
    negative:
      - nasal
  before:
    positive:
      - nasal
  applies:
    positive:
      - nasal
